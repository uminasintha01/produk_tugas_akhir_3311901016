{"version":3,"sources":["webpack:///src/app/pages/landing/selling-hp/screen-testing/screen-testing.page.html","webpack:///src/app/pages/landing/selling-hp/screen-testing/screen-testing-routing.module.ts","webpack:///src/app/pages/landing/selling-hp/screen-testing/screen-testing.module.ts","webpack:///src/app/pages/landing/selling-hp/screen-testing/screen-testing.page.scss","webpack:///src/app/pages/landing/selling-hp/screen-testing/screen-testing.page.ts"],"names":["routes","path","component","ScreenTestingPageRoutingModule","imports","forChild","exports","ScreenTestingPageModule","declarations","ScreenTestingPage","platform","utility","alertController","navCtrl","utilsService","storage","selling","router","activatedRoute","lineWidth","touching","queryParams","subscribe","params","brand","ram","storages","lokasi_trade","console","log","canvasElement","canvas","nativeElement","width","height","ctx","getContext","fillStyle","fillRect","showToast","event","test","checkCanvas","canvasPosition","getBoundingClientRect","currentX","currentY","i","changedTouches","length","pageX","x","pageY","y","beginPath","globalCompositeOperation","arc","Math","PI","fill","saveX","saveY","create","header","message","backdropDismiss","buttons","text","role","handler","navigationExtras","screenHasProblem","navigateForward","alert","present","pixelBuffer","Uint32Array","getImageData","data","buffer","some","color","blank","isCanvasBlank","presentAlertConfirm","selector","template"],"mappings":"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","file":"selling-hp-screen-testing-screen-testing-module-es5.js","sourcesContent":["export default \" \\n\\n<ion-content style=\\\"--background: #ccc url('../../../../assets/images/phone/background.png') no-repeat center center / cover;\\\">\\n  <canvas #screenTest \\n  (touchstart)=\\\"startTouch($event)\\\" \\n  (touchmove)=\\\"moveTouch($event)\\\" \\n  (touchend)=\\\"endTouch()\\\">\\n \\n</canvas>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ScreenTestingPage } from './screen-testing.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ScreenTestingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ScreenTestingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ScreenTestingPageRoutingModule } from './screen-testing-routing.module';\n\nimport { ScreenTestingPage } from './screen-testing.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ScreenTestingPageRoutingModule\n  ],\n  declarations: [ScreenTestingPage]\n})\nexport class ScreenTestingPageModule {}\n","export default \"ion-content {\\n  --overflow:hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbGFuZGluZy9zZWxsaW5nLWhwL3NjcmVlbi10ZXN0aW5nL0M6XFxVc2Vyc1xcYXJkaW1cXERlc2t0b3BcXGhhbXBpciBzZWxlc2FpXFxOZXcgZm9sZGVyXFxteVRyYWRlX1YzLjAvc3JjXFxhcHBcXHBhZ2VzXFxsYW5kaW5nXFxzZWxsaW5nLWhwXFxzY3JlZW4tdGVzdGluZ1xcc2NyZWVuLXRlc3RpbmcucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9sYW5kaW5nL3NlbGxpbmctaHAvc2NyZWVuLXRlc3Rpbmcvc2NyZWVuLXRlc3RpbmcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xhbmRpbmcvc2VsbGluZy1ocC9zY3JlZW4tdGVzdGluZy9zY3JlZW4tdGVzdGluZy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudHtcclxuICAgIC0tb3ZlcmZsb3c6aGlkZGVuO1xyXG59IiwiaW9uLWNvbnRlbnQge1xuICAtLW92ZXJmbG93OmhpZGRlbjtcbn0iXX0= */\";","import { Component, ViewChild } from \"@angular/core\";\nimport { Platform } from \"@ionic/angular\";\nimport { UtilitiesService } from \"../../../../services/utilities.service\";\nimport { AlertController } from '@ionic/angular';\nimport { NavController } from '@ionic/angular';\nimport { NavigationExtras } from '@angular/router';\nimport { SellingApiService } from './../../../../services/api/selling-api.service';\nimport { HelperService } from '../../../../services/helper.service';\nimport { Device } from \"@ionic-native/device/ngx\";\nimport { Router } from '@angular/router';\nimport { ActivatedRoute } from \"@angular/router\";\nimport { MembershipService } from \"../../../../services/membership.service\";\nimport { Storage } from \"@ionic/storage\";\nimport { tokenKey } from \"../../../../config/api\";\nimport { ActivationKey } from \"../../../../config/api\";\n\n@Component({\n  selector: \"app-screen-testing\",\n  templateUrl: \"./screen-testing.page.html\",\n  styleUrls: [\"./screen-testing.page.scss\"],\n})\nexport class ScreenTestingPage {\n\n  @ViewChild(\"screenTest\", { static: false })\n\n  canvas: any;\n  canvasElement: any;\n  saveX: number;\n  saveY: number;\n\n  lineWidth = 10;\n  touching = false;\n \n  constructor(\n    private platform: Platform,\n    private utility: UtilitiesService,\n    public alertController: AlertController,\n    public navCtrl: NavController,\n    public utilsService: UtilitiesService, \n    private storage: Storage,\n    private selling: MembershipService,\n    private router: Router,\n    private activatedRoute: ActivatedRoute\n\n  ) {}\n\n  ram: string;\n  storages: string;\n  brand: string;\n  lokasi_trade: string;\n  \n  ngOnInit() {\n    // this.getCode();\n    this.activatedRoute.queryParams.subscribe(params => {\n      this.brand = params[\"brand\"];\n      this.ram = params[\"ram\"];\n      this.storages = params[\"storages\"];\n      this.lokasi_trade = params[\"lokasi_trade\"];\n      console.log(this.storages)\n      console.log(this.ram)\n      console.log(this.brand)\n      console.log(\"lokasi trade\"+ this.lokasi_trade)\n\n    });\n  }\n\n  ionViewWillEnter() {\n    this.canvasElement = this.canvas.nativeElement;\n    this.canvasElement.width = this.platform.width() + \"\";\n    this.canvasElement.height = this.platform.height() + \"\";\n\n    let ctx = this.canvasElement.getContext(\"2d\");\n    ctx.fillStyle = \"blue\";\n    ctx.fillRect(\n      10,\n      10,\n      this.canvasElement.width - 20,\n      this.canvasElement.height - 20\n    );\n\n    this.utility.showToast(\"Bersihkan layar untuk melanjutkan.\");\n  }\n\n  startTouch(event) {\n    this.touching = true;\n\n    this.test(event);\n  }\n\n  moveTouch(event) {\n    if (!this.touching) return;\n\n    this.test(event);\n  }\n\n  endTouch() {\n    this.touching = false;\n    this.checkCanvas();\n  }\n\n  test(event) {\n    const canvasPosition = this.canvasElement.getBoundingClientRect();\n    let ctx = this.canvasElement.getContext(\"2d\");\n\n    let currentX;\n    let currentY;\n    var i;\n    for (i = 0; i < event.changedTouches.length; i++) {\n      currentX = event.changedTouches[i].pageX - canvasPosition.x;\n      currentY = event.changedTouches[i].pageY - canvasPosition.y;\n    }\n\n    ctx.beginPath();\n    ctx.globalCompositeOperation = \"destination-out\";\n    ctx.arc(currentX, currentY, 42, 0, Math.PI * 2, false);\n    ctx.fill();\n\n    this.saveX = currentX;\n    this.saveY = currentY;\n  }\n\n  async presentAlertConfirm() {\n    const alert = await this.alertController.create({\n      header: 'ZFix',\n      message: 'Jika anda tidak dapat melanjutkan test ini, anda bisa melewati dan lanjut ke tahap selanjutnya dengan konfirmasi bahwa layar memiliki masalah.',\n      backdropDismiss: false,\n      buttons: [\n        {\n          text: 'Lanjut',\n          role: 'cancel',\n          handler: () => {\n            console.log('Continue');\n          }\n        }, {\n          text: 'Lewati',\n          handler: async () => {\n            const alert = await this.alertController.create({\n              header: 'ZFix',\n              message: 'Jika anda skip tahap ini, anda memverifikasi bahwa layar anda memiliki masalah.',\n              backdropDismiss: false,\n              buttons: [      \n                {\n                  text: 'Lanjut',\n                  role: 'cancel',\n                  handler: () => {\n                    // console.log('Continue');\n                  }\n                },{\n                    text: 'Tetap skip',\n                    handler: () => {\n                      let navigationExtras: NavigationExtras = {\n                        queryParams: {\n                            brand: this.brand,\n                            ram: this.ram,\n                            storages: this.storages,\n                            lokasi_trade: this.lokasi_trade,\n                            screenHasProblem: 1,\n                        }\n                      };\n                      this.navCtrl.navigateForward([\"/landing/selling-phone/screen-testing/camera\"], navigationExtras);\n                    }\n                  }\n\n              ]\n            });\n            await alert.present();\n          }\n        }, \n        // {\n        //   text: 'Lewati',\n        //   handler: () => {\n        //     let navigationExtras: NavigationExtras = {\n        //       queryParams: {\n        //         screenHasProblem: 1,\n        //       }\n        //     };\n        //     this.navCtrl.navigateForward([\"/landing/membership-activation/device-detail/screen-testing/device-image\"], navigationExtras);\n        //     this.utility.showToast(\"Layar memiliki masalah.\");\n        //   }\n        // }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  isCanvasBlank(canvas) {\n    let ctx = this.canvasElement.getContext(\"2d\");\n\n    const pixelBuffer = new Uint32Array(\n      ctx.getImageData(0, 0, canvas.width, canvas.height).data.buffer\n    );\n\n    return !pixelBuffer.some((color) => color !== 0);\n  }\n\n  checkCanvas() {\n    const blank = this.isCanvasBlank(this.canvasElement);\n\n    if (blank) {\n      this.utility.showToast(\"Layar telah bersih.\");\n      let navigationExtras: NavigationExtras = {\n        queryParams: {\n          brand: this.brand,\n          ram: this.ram,\n          storages: this.storages,\n          lokasi_trade: this.lokasi_trade,\n          screenHasProblem: 0,\n        }\n      };\n      this.navCtrl.navigateForward([\"/landing/selling-phone/screen-testing/camera\"], navigationExtras);\n    } else {\n      this.utility.showToast(\"Layar belum dibersihkan.\");\n      this.presentAlertConfirm()\n    }\n  }\n\n  // getCode() {\n  //   this.storage.get(tokenKey).then((token) => {\n  //     this.storage.get(ActivationKey).then((data) => {\n  //       let membershipActivation = {\n  //         brand: data.brand,\n  //         ram: data.ram,\n  //         storage: data.storage,\n  //       }\n  //       console.log(membershipActivation)\n  //     });\n  //   });\n  // }\n\n}"]}